<p id="notice"><%= notice %></p>
<div class="container">
  <h1 class="mb-4">Tasks list</h1>

<div class="row">
  <div class="form-group col-md-3">
    <%= form_with url: tasks_path, method: :get, local: true, class:"form my-2 my-lg-0" do |f| %>
      <%= f.label :task_name %>
      <%= f.text_field :task_name ,class: "form-control" %>
  </div>

    <div class="form-group col-md-3">
       <%= f.label :status %>
       <%= f.select( :status, ['Unstarted', 'In progress', 'Completed'], {include_blank: 'Select status'}, {class: "form-control"}) %>
    </div>
        <%= f.submit "Search", name: nil, data: { disable_with: false }, class: " col-6 btn btn-outline-success my-2 my-sm-0 mr-5" %>
    <% end %>
    <div class=" mr-2">
      <a href = "<%= tasks_path(sort_expired: "true") %>" class="btn btn-primary">Sort by end deadline</a>
    </div>
    <div class="">
      <a href = "<%= tasks_path(sort_priority: "true") %>" class="btn btn-primary">Sort by priority </a>
  </div>
</div>


  

  <div class ='table-responsive mb-4'>
    <a href = "<%= new_task_path %>" class="btn btn-primary mb-3 mt-3" >Add new Task</a> 
    <table class = "table table-striped table-hover border" >
      <thead>
        <tr>
          <th>Task name </th>
          <th>Description </th>
          <th>Priority </th>
          <th>Status </th>
          <th>Deadline </th>
          <th>Actions </th>
        </tr>
      </thead>

      <tbody>
        <% @tasks.each do |task| %>
          <tr>
            <td class="task_row" ><%= task.task_name %></td>
            <td><%= truncate(task.task_details, length: 50) %></td>
            <td><%= task.priority %></td>
            <td><%= task.status %></td>
            <td class="deadline_row" ><%= task.deadline %></td>
            <td>
              <a href = "<%= task_path(task.id) %>" class="btn btn-primary">Show</a>
              <a href = "<%= edit_task_path(task.id) %>" class="btn btn-warning">Edit</a>
              <a href = "<%= task_path(task.id) %>" class="btn btn-danger", data-confirm="Are you sure?" data-method="DELETE">Destroy</a>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  

    
    <div class="container pagination justify-content-center" >
      <%= paginate @tasks, theme: 'twitter-bootstrap-4', pagination_class: "pagination-sm" %>
    </div>
 
  </div>
</div> <br>